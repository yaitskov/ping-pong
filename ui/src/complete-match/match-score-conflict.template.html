<main-menu></main-menu>
<form>
  <div class="container admin-score">
    <div class="form-group">
      <div class="alert alert-danger">
        You tried to score set {{1 + $ctrl.yourSet}}, while it is already complete.
        Original score of set {{1 + $ctrl.yourSet}} is different.
      </div>
    </div>
    <div class="form-group">
      <table class="table">
        <tr>
          <td>Set</td>
          <td ng-repeat="participant in $ctrl.participants">
            <a href="#!/my/tournament/{{$ctrl.matchScore.tid}}/participant/{{participant.uid}}">
               {{participant.name | compactName}}
            </a>
          </td>
        </tr>
        <tr ng-repeat="set in $ctrl.sets"
            ng-class="{'warning': $index == $ctrl.yourSet}">
          <td>{{$index + 1}}</td>
          <td>
            {{set.a}}
            <span ng-show="$index == $ctrl.yourSet">
              / <strong>{{$ctrl.yourSetScore[0]['score']}}</strong>
            </span>
          </td>
          <td>
            {{set.b}}
            <span ng-show="$index == $ctrl.yourSet">
              / <strong>{{$ctrl.yourSetScore[1]['score']}}</strong>
            </span>
          </td>
        </tr>
        <tr>
          <td>Total</td>
          <td class="alert" ng-class="{'success': $ctrl.participants[0].uid == $ctrl.matchScore.winUid, 'danger': $ctrl.participants[1].uid == $ctrl.matchScore.winUid}">
            {{$ctrl.matchScore.wonSets[$ctrl.participants[0].uid]}}
          </td>
          <td class="alert" ng-class="{'success': $ctrl.participants[1].uid == $ctrl.matchScore.winUid, 'danger': $ctrl.participants[0].uid == $ctrl.matchScore.winUid}">
            {{$ctrl.matchScore.wonSets[$ctrl.participants[1].uid]}}
          </td>
        </tr>
        <tr ng-show="$ctrl.matchScore.winUid">
          <td>Winner</td>
          <td colspan="2">
            <span ng-repeat="participant in $ctrl.pariticipants">
              <a href="#!/my/tournament/{{$ctrl.matchScore.tid}}/participant/{{participant.uid}}"
                 ng-if="participant.uid == $ctrl.matchScore.winUid">
                {{participant.name}}
              </a>
            </span>
          </td>
        </tr>
        <tr ng-show="!$ctrl.matchScore.winUid">
          <td colspan="3">
            Match continues...
          </td>
        </tr>
      </table>
    </div>
    <div class="form-group">
      <a href="#!/my/matches/judgement" class="btn btn-success">
        Keep score
      </a>
      <a ng-click="$ctrl.rescore()" class="btn btn-primary">
        Overwrite score
      </a>
    </div>
  </div>
</div>
