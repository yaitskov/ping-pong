<main-menu></main-menu>
<div class="container-fluid admin-judgement">
  <request-status></request-status>
  <table class="table" ng-show="$ctrl.matches.length > 0">
    <thead>
      <tr>
        <td class="state-cell">State</td>
        <td class="match-cell">Match</td>
        <td>Table</td>
        <td>Opponents</td>
        <td>Score</td>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="match in $ctrl.matches | orderBy : 'table.id'">
        <td class="state-cell">{{match.state}}</td>
        <td class="match-cell">{{match.matchType}}</td>
        <td>
          <a href="#!/place/tables/{{match.table.id}}">
            <span class="glyphicon glyphicon-map-marker"></span>
            T{{match.table.label}}
          </a>
        </td>
        <td class="participant-names">
          <a ng-repeat="participant in match.participants"
             class="btn btn-default"
             href="#!/participant/{{$ctrl.tournamentId}}/{{participant.uid}}">
            {{participant.name}}
          </a>
        </td>
        <td>
          <a class="btn btn-primary"
             ng-click="$ctrl.completeMatch(match.mid)">
            Score
          </a>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="alert alert-info" ng-show="$ctrl.matches.length == 0">
    <p>You don't have any match to judge.</p>
    <p ng-show="!$ctrl.tournament.next && !$ctrl.tournament.previous">
      <a href="#!/tournaments">Find a tournament</a> interesting for you
      and submit an enquiry to administrator.
    </p>
    <p ng-show="$ctrl.tournament.next">
      Next tournament, you judge, is <a href="#!/tournament/{{$ctrl.tournament.next.tid}}">
        {{$ctrl.tournament.next.name}}
      </a> tournament, which begins at {{$ctrl.tournament.next.opensAt
      | date: 'MMMM dd yyyy HH:mm'}}.
    </p>
    <p ng-show="$ctrl.tournament.previous">
      Tournment <a href="#!/tournament/{{$ctrl.tournament.previous.tid}}">
        {{$ctrl.tournament.previous.name}}</a> is complete.
    </p>
  </div>
</div>
