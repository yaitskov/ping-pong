<main-menu></main-menu>
<div class="container-fluid admin-judgement">
  <request-status></request-status>
  <div class="container" ng-show="$ctrl.previouslyScoredEnded">
    <div class="alert alert-info" translate="tournament is complete"
         translate-values="{url: '#!/tournament/result/' + $ctrl.tournament.previous.tid, name: $ctrl.tournament.previous.name}">
    </div>
    <div class="form-group">
      <button class="btn btn-primary"
              ng-click="$ctrl.iSawTournamentEnd()">
        {{ 'Ok, I see' | translate }}
      </button>
      <a class="btn btn-default"
         href="#!/tournament/result/{{$ctrl.tournament.previous.tid}}">
        {{ 'Watch Ratings' | translate }}
      </a>
    </div>
  </div>
  <div class="form-group tables" ng-show="$ctrl.matches.length > 0">
    <button class="btn btn-primary"
            ng-repeat="match in $ctrl.matches | orderBy : 'table.label'"
            ng-click="$ctrl.completeMatch(match)"
            ng-show="$ctrl.matches.length > 0">
      T{{match.table.label}}
    </button>
  </div>
  <table class="table" ng-show="$ctrl.matches.length > 0">
    <thead>
      <tr>
        <td class="match-cell">
          {{ 'the match' | translate }}</td>
        <td>
          {{ 'the table' | translate }}
        </td>
        <td>
          {{ 'Opponents' | translate }}
        </td>
        <td>
          {{ 'Score' | translate }}
        </td>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="match in $ctrl.matches | orderBy : 'table.label'">
        <td class="match-cell">{{match.type}}</td>
        <td>
          <a href="#!/place/tables/{{match.table.id}}">
            <span class="glyphicon glyphicon-map-marker"></span>
            T{{match.table.label}}
          </a>
        </td>
        <td class="participant-names">
          <a ng-repeat="participant in match.participants"
             class="btn btn-default"
             href="#!/my/tournament/{{match.tid}}/participant/{{participant.uid}}">
            {{participant.name}}
          </a>
        </td>
        <td>
          <a class="btn btn-primary"
             ng-click="$ctrl.completeMatch(match)">
            {{ 'Score' | translate }}
          </a>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="container" ng-show="!$ctrl.previouslyScoredEnded && $ctrl.matches.length == 0">
    <div class="alert alert-info">
      <p ng-show="!$ctrl.tournament.current"
         translate="no-match-to-judge"
         translate-values="{url: '#!/tournament/new'}">
      </p>
      <p ng-show="$ctrl.tournament.current.length">
        {{ 'you-judge-now' | translate }}
        <a ng-repeat="tournament in $ctrl.tournament.current"
           href="#!/watch/tournament/{{tournament.tid}}">
          <span ng-show="$index > 0">, </span>{{tournament.name}}
        </a>
        <span ng-show="$ctrl.tournament.current.length == 1">
          {{ 'tournament' | translate }},
        </span>
        <span ng-show="$ctrl.tournament.current.length > 1">
          {{ 'tournaments' | translate }},
        </span>
        {{ 'you-judge-now-but' | translate }}
      </p>
      <p ng-show="$ctrl.tournament.next"
         translate="next-tournament-you-judge"
         translate-values="$ctrl.nextFormatted()">
      </p>
      <p ng-show="$ctrl.tournament.previous" translate="latest-tournament-complete"
         translate-values="{url: '#!/my/tournament/' + $ctrl.tournament.previous.tid, name: $ctrl.tournament.previous.name}">
      </p>
  </div>
</div>
