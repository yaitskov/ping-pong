<main-menu></main-menu>
<div class="container">
  <request-status></request-status>
  <div ng-show="$ctrl.tournament.state == 'Close'">
    <div class="alert alert-info" >
      Tournament <a href="#!/tournament/result/{{$ctrl.tournament.tid}}">
        {{$ctrl.tournament.name}}
      </a>
      is complete.
    </div>
  </div>
  <div class="alert alert-info"
       ng-show="$ctrl.tournament.state == 'Canceled'">
    Tournament <b>{{$ctrl.tournament.name}}</b> is canceled.
  </div>
  <div class="alert alert-info"
       ng-show="$ctrl.tournament.state == 'Open' && $ctrl.matches.length == 0">
    There is no matches left to play.
  </div>
  <div ng-show="$ctrl.winners.length > 0">
    <fieldset>
      <legend>Winners</legend>
      <table class="table table-bordered">
        <thead>
          <tr>
            <td>Position</td>
            <td>Participant</td>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="winner in $ctrl.winners">
            <td>{{$index + 1}}</td>
            <td>
              <a href="#!/participant/{{$ctrl.tid}}/{{winner.uid}}">{{winner.name}}</a>
            </td>
          </tr>
        </tbody>
      </table>
    </fieldset>
  </div>
  <table class="table table-bordered" ng-show="$ctrl.matches.length > 0">
    <thead>
      <tr>
        <td>Table</td>
        <td>Participants</td>
        <td>Score</td>
        <td>Started</td>
        <td>Category</td>
        <td>Match</td>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="match in $ctrl.matches">
        <td><a href="#!/table/{{match.table.id}}">{{match.table.label}}</a></td>
        <td>
          <a ng-repeat="participant in match.participants"
             class="btn btn-default"
             href="#!/participant/{{$ctrl.tid}}/{{participant.uid}}">
            {{participant.name}}
          </a>
        </td>
        <td>
          <span ng-repeat="score in match.score track by $index" class="badge">
            {{score}}
          </span>
        </td>
        <td>{{match.started | date:'HH:mm'}}</td>
        <td>
          <a href="#!/tournament/category/{{$ctrl.tid}}/{{match.category.cid}}">
            {{match.category.name}}
          </a>
        </td>
        <td>{{match.type}}</td>
      </tr>
    </tbody>
  </table>
</div>
