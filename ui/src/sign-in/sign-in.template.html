<main-menu></main-menu>
<div class="container">
  <form novalidate name="$ctrl.form"
        ng-submit="$ctrl.signIn()">
    <div class="form-group"
         ng-show="!$ctrl.ok"
         ng-class="{'has-error': ($ctrl.form.$submitted || $ctrl.form.email.$dirty) && $ctrl.form.email.$invalid}">
      <label for="email">Email</label>
      <input type="email" class="form-control"
             required
             ng-model="$ctrl.email"
             ng-maxlength="60"
             validate-email
             name="email"
             id="email" placeholder="Email"/>
      <p class="help-block"
         ng-show="($ctrl.form.$submitted || $ctrl.form.email.$dirty) && $ctrl.form.email.$error.required">
        Email is required
      </p>
      <p class="help-block"
         ng-show="$ctrl.form.email.$error.maxlength">
        Email length must be less than 60
      </p>
      <p class="help-block"
         ng-show="$ctrl.form.email.$error.email">
        Email format is wrong
      </p>
      <p class="help-block" ng-show="!$ctrl.form.email.$dirty || $ctrl.form.email.$valid">
        Provide an email address, which is used for the account registration.
      </p>
      <p class="help-block" ng-show="!$ctrl.form.email.$dirty || $ctrl.form.email.$valid">
        An email with an one time authentication link will be sent.
      </p>
    </div>
    <div class="form-group" ng-show="!$ctrl.ok">
      <button type="submit" class="btn btn-default btn-primary">
        Send Link
      </button>
    </div>
    <div class="form-group">
      <request-status></request-status>
    </div>
    <div class="form-group">
      <div class="alert alert-info" ng-show="$ctrl.ok">
        The email has been sent.
        Now you can check your mail box for the letter.
      </div>
    </div>
  </form>
  <details>
    <summary>Info</summary>
    <p class="alert alert-info">
      Here you can get another session for your account, if the
      account has been associated with an email.  One time sign-in
      link will be sent to that address. If you haven't provided an
      email during sing-up or later, there is no option to generate
      sign-in link to your account. You always can sign-up again via
      another account.
    </p>
  </details>
</div>
