<main-menu></main-menu>
<div class="container">
  <table class="table">
    <tbody>
      <tr>
        <td>Name</td>
        <td>{{$ctrl.tournament.name}}</td>
      </tr>
      <tr>
        <td>City</td>
        <td>{{$ctrl.tournament.place.address.address}}</td>
      </tr>
      <tr>
        <td>Place</td>
        <td>
          <a href="#!/place/{{$ctrl.tournament.place.pid}}">{{$ctrl.tournament.place.name}}</a>
        </td>
      </tr>
      <tr>
        <td>Date</td>
        <td>
          <span class="date">
            {{$ctrl.tournament.opensAt|date:"MMM d"}}
          </span>
          <span class="time">
            {{$ctrl.tournament.opensAt|date:"EEE h a Z"}}
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <table class="table table-bordered">
    <tbody>
      <tr>
        <td title="Price per participant">Price</td>
        <td title="How many people are already enlisted">Enlisted</td>
        <td title="Available payment methods">Payment</td>
      </tr>
      <tr>
        <td>
          <span ng-if="$ctrl.tournament.price">
            {{$ctrl.tournament.price}}
          </span>
          <span ng-if="!$ctrl.tournament.price">
            free
          </span>
        </td>
        <td>{{$ctrl.tournament.alreadyEnlisted}}</td>
        <td>cash</td>
      </tr>
    </tbody>
  </table>

  <div class="form-group" ng-show="!$ctrl.tournament.iamEnlisted">
    <label>Categories</label>
    <div class="btn-group" role="group">
      <label class="btn btn-default" ng-repeat="category in $ctrl.tournament.categories"
             ng-click="$ctrl.activate($event)">
        <input type="radio" name="categoryRadio"
               ng-model="$ctrl.categoryId" ng-value="category.cid"/>
        {{category.name}}
      </label>
    </div>
  </div>
  <div class="form-group" ng-show="$ctrl.tournament.iamEnlisted">
    <label>My category</label>
    <input type="text" class="form-control" readonly
           ng-value="$ctrl.categoryName"/>
  </div>
  <div class="form-group" ng-show="$ctrl.error">
    <div class="alert alert-danger">
      {{$ctrl.error}}
    </div>
  </div>
  <div class="form-group" ng-show="$ctrl.tournament">
    <button type="button" class="btn btn-primary"
            ng-click="$ctrl.enlistMe()"
            ng-show="!$ctrl.tournament.iamEnlisted && !$ctrl.tournament.iamAdmin">Enlist Me</button>
    <button type="button" class="btn btn-primary"
            ng-click="$ctrl.resign()"
            ng-show="$ctrl.tournament.iamEnlisted">Resign</button>
    <button type="button" class="btn btn-primary"
            ng-show="$ctrl.tournament.iamAdmin">Enlist Offline Participant</button>
    <a class="btn btn-primary label-info" role="button" ng-show="$ctrl.tournament.previousTid"
       href="#!/tournament/drafting/{{$ctrl.tournament.previousTid}}">
      Previous tournament in the seria
    </a>
  </div>
</div>
